<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Repayment Table - YALO</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: white;
      color: black;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
      color: black;
    }
    th {
      background-color: #f4f4f4;
    }
    .dropdown {
      cursor: pointer;
      color: black;
      text-decoration: underline;
    }
    .items {
      display: none;
    }
    .item-row td {
      border-top: none;
      padding-left: 30px; /* indentation for better hierarchy */
      background-color: #fafafa; /* subtle background to distinguish */
    }
    .paid {
      color: green;
      font-weight: bold;
      margin-left: 10px;
      font-size: 0.9em;
    }
    .pending {
      color: orange;
      font-weight: bold;
      margin-left: 10px;
      font-size: 0.9em;
    }
    .late {
      color: red;
      font-weight: bold;
      margin-left: 10px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>
  <h2>YALO Loan Repayment Schedule May 2025- January 2026 9 months </h2>
  <table id="repaymentTable">
    <thead>
      <tr>
        <th>Month</th>
        <th>Amount </th>
      </tr>
    </thead>
    <tbody>
      <!-- Rows generated by JS -->
    </tbody>
  </table>

  <script>
    const months = [
      "Security Deposit in April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
      "January"
    ];

    const tableBody = document.querySelector("#repaymentTable tbody");

    function randomStatusText() {
      return Math.random() > 0.5 
        ? "<span class='paid'>Paid</span>" 
        : "<span class='pending'>Due</span>";
    }

    function randomDueDate(monthIndex) {
      const day = Math.floor(Math.random() * 28) + 1;
      return `${day}/0${(monthIndex % 12) + 1}/2025`;
    }

    months.forEach((month, index) => {
      const row = document.createElement("tr");

      // Month column with status beside month name
      const monthCell = document.createElement("td");

      // For May (index 1) and June (index 2) show the new "Late" status in red
      let statusHTML;
      if (index === 0) {
        statusHTML = "<span class='paid'>Paid</span>";
      } else if (index === 1 || index === 2) {
        statusHTML = "<span class='late'>Late</span>";
      } else {
        statusHTML = randomStatusText();
      }

      if (index === 0) {
        // For Security Deposit in April: not clickable and no child rows
        monthCell.innerHTML = `${month} ${statusHTML}`;
      } else {
        monthCell.innerHTML = `<span class="dropdown" onclick="toggleItems('items-${index}')">${month}</span> ${statusHTML}`;
      }
      row.appendChild(monthCell);

      // Amount column (sum of rent 150,000 + marketplace 50,000)
      const amountCell = document.createElement("td");
      amountCell.textContent = "₦200,000";
      row.appendChild(amountCell);

      tableBody.appendChild(row);

      // If not the Security Deposit row, add child rows
      if (index !== 0) {
        // Dropdown items as child rows with amount in Amount column
        const rentRow = document.createElement("tr");
        rentRow.classList.add("item-row", "items");
        rentRow.id = `items-${index}`;
        rentRow.innerHTML = `
          <td>└ Rent Financing</td>
          <td>₦150,000</td>
        `;
        tableBody.appendChild(rentRow);

        const marketRow = document.createElement("tr");
        marketRow.classList.add("item-row", "items");
        marketRow.id = `items-${index}`;
        marketRow.innerHTML = `
          <td>└ Marketplace (Fridge)</td>
          <td>₦50,000</td>
        `;
        tableBody.appendChild(marketRow);
      }
    });

    function toggleItems(id) {
      const rows = document.querySelectorAll(`#${id}`);
      rows.forEach(row => {
        row.style.display = row.style.display === "table-row" ? "none" : "table-row";
      });
    }
  </script>
</body>
</html>
