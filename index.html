<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Repayment Table - YALO</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: white;
      color: black;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
      color: black;
    }
    th {
      background-color: #f4f4f4;
    }
    .dropdown {
      cursor: pointer;
      color: black;
      text-decoration: underline;
    }
    .items {
      display: none;
      margin-top: 5px;
    }
    .item-row td {
      border-top: none;
    }
    .paid {
      color: green;
      font-weight: bold;
    }
    .pending {
      color: orange;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h2>YALO Loan Repayment Schedule</h2>
  <table id="repaymentTable">
    <thead>
      <tr>
        <th>Month</th>
        <th>Amount Due</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <!-- Rows generated by JS -->
    </tbody>
  </table>

  <script>
    const months = [
      "Security Deposit in April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
      "January"
    ];

    const tableBody = document.querySelector("#repaymentTable tbody");

    function randomStatus() {
      return Math.random() > 0.5 ? "<span class='paid'>Paid</span>" : "<span class='pending'>Pending</span>";
    }

    function randomDueDate(monthIndex) {
      const day = Math.floor(Math.random() * 28) + 1;
      return `${day}/0${(monthIndex % 12) + 1}/2025`;
    }

    months.forEach((month, index) => {
      const row = document.createElement("tr");

      // Month column
      const monthCell = document.createElement("td");
      monthCell.innerHTML = `<span class="dropdown" onclick="toggleItems('items-${index}')">${month}</span>`;
      row.appendChild(monthCell);

      // Amount column (sum of rent 150,000 + marketplace 50,000)
      const amountCell = document.createElement("td");
      amountCell.textContent = "₦200,000";
      row.appendChild(amountCell);

      // Status column
      const statusCell = document.createElement("td");
      statusCell.id = `status-${index}`;
      statusCell.textContent = "Pending";
      statusCell.classList.add("pending");
      row.appendChild(statusCell);

      tableBody.appendChild(row);

      // Dropdown items as child rows with amount + due date in Amount Due column
      const rentRow = document.createElement("tr");
      rentRow.classList.add("item-row", "items");
      rentRow.id = `items-${index}`;
      rentRow.innerHTML = `
        <td>Rent Financing</td>
        <td>₦150,000 (Due: ${randomDueDate(index)})</td>
        <td>${randomStatus()}</td>
      `;
      tableBody.appendChild(rentRow);

      const marketRow = document.createElement("tr");
      marketRow.classList.add("item-row", "items");
      marketRow.id = `items-${index}`;
      marketRow.innerHTML = `
        <td>Marketplace (Fridge)</td>
        <td>₦50,000 (Due: ${randomDueDate(index)})</td>
        <td>${randomStatus()}</td>
      `;
      tableBody.appendChild(marketRow);
    });

    function toggleItems(id) {
      const rows = document.querySelectorAll(`#${id}`);
      rows.forEach(row => {
        row.style.display = row.style.display === "table-row" ? "none" : "table-row";
      });
    }
  </script>
</body>
</html>
